spring:
  application:
    name: dds-busqueda

  data:
    mongodb:
      uri: ${MONGODBURI}
      database: dds_busqueda
      auto-index-creation: true

  task:
    execution:
      pool:
        core-size: 5
        max-size: 10
        queue-capacity: 100
  # ✅ AGREGAR: Para Jackson y fechas
  jackson:
    serialization:
      write-dates-as-timestamps: false
    deserialization:
      fail-on-unknown-properties: false

server:
  port: ${PORT:8085}

logging:
  level:
    ar.edu.utn.dds.k3003.busqueda: INFO
    org.springframework.data.mongodb: DEBUG

# URLs de otros módulos (para sincronización inicial)
modules:
  fuente:
    url: ${DDS_FUENTE:http://localhost:8082}
  pdi:
    url: ${DDS_PDI:http://localhost:8081}
  solicitudes:
    url: ${DDS_SOLICITUDES:http://localhost:8080}

# Configuración de búsqueda
busqueda:
  page-size-default: 10
  page-size-max: 50
  sync:
    enabled: ${SYNC_ENABLED:false}
    initial-delay: 30000  # 30 segundos después del startup
    fixed-delay: 300000   # Cada 5 minutos

# Configuración datadog y actuator
management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics,prometheus
  metrics:
    tags:
      application: dds-busqueda
      environment: ${ENVIRONMENT:development}
  datadog:
    metrics:
      export:
        enabled: true
        api-key: ${DD_API_KEY}
        application-key: ${DD_APP_KEY}
        uri: https://api.datadoghq.com/
        step: 10s